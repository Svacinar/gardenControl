{"ast":null,"code":"import _defineProperty from\"C:\\\\Users\\\\Patrik Mackerle\\\\Desktop\\\\javascript\\\\garden_app_v2\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";import _objectSpread from\"C:\\\\Users\\\\Patrik Mackerle\\\\Desktop\\\\javascript\\\\garden_app_v2\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"C:\\\\Users\\\\Patrik Mackerle\\\\Desktop\\\\javascript\\\\garden_app_v2\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\Patrik Mackerle\\\\Desktop\\\\javascript\\\\garden_app_v2\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"C:\\\\Users\\\\Patrik Mackerle\\\\Desktop\\\\javascript\\\\garden_app_v2\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"C:\\\\Users\\\\Patrik Mackerle\\\\Desktop\\\\javascript\\\\garden_app_v2\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import logo from\"./logo.svg\";import\"./App.css\";import Button from\"./components/UI/Button/button.js\";import axios from'axios';var App=/*#__PURE__*/function(_Component){_inherits(App,_Component);var _super=_createSuper(App);function App(){var _this;_classCallCheck(this,App);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={serverConnected:false,apiResponse:\"Hi there, server not connected....\"};return _this;}_createClass(App,[{key:\"callAPI\",value:function callAPI(){var _this2=this;console.log(\"api called\");fetch(\"http://localhost:9000/api\").then(function(res){return res.text();}).then(function(res){console.log(newState);var newState=JSON.parse(res);_this2.setState(_objectSpread(_objectSpread({},newState),{},{apiResponse:\"Server Connected\",serverConnected:true}));}).catch(function(err){return err;});}},{key:\"componentDidMount\",value:function componentDidMount(){this.callAPI();}},{key:\"countdownHandler\",value:function countdownHandler(valveName){var _this3=this;setTimeout(function(){return _this3.setState(_defineProperty({},valveName,false));},this.state.timer);}},{key:\"handleButtonClick\",value:function handleButtonClick(e,valveName){var _this4=this;axios.get(\"http://localhost:9000/\".concat(valveName)).then(this.setState(_defineProperty({},valveName,!this.state[valveName]),function(){return console.log(_this4.state[valveName]);})).then(this.countdownHandler(valveName));}},{key:\"render\",value:function render(){var _this5=this;return/*#__PURE__*/React.createElement(\"div\",{className:\"App\"},/*#__PURE__*/React.createElement(\"header\",{className:\"App-header\"},/*#__PURE__*/React.createElement(\"img\",{src:logo,className:\"App-logo\",alt:\"logo\"}),/*#__PURE__*/React.createElement(\"h1\",{className:\"App-title\"},\"Welcome to the Control System\")),/*#__PURE__*/React.createElement(\"h2\",{className:\"App-intro\"},this.state.apiResponse),/*#__PURE__*/React.createElement(\"div\",{className:\"btn-group\"},/*#__PURE__*/React.createElement(Button,{name:\"Valve 1\",status:this.state.valve1,clicked:function clicked(e){return _this5.handleButtonClick(e,\"valve1\");}}),/*#__PURE__*/React.createElement(Button,{name:\"Valve 2\",status:this.state.valve2,clicked:function clicked(e){return _this5.handleButtonClick(e,\"valve2\");}})),/*#__PURE__*/React.createElement(\"footer\",{className:\"footer\"},\"Created 2020, Patrik Mackerle, version 0.1 ALFA\"));}}]);return App;}(Component);export default App;","map":{"version":3,"sources":["C:/Users/Patrik Mackerle/Desktop/javascript/garden_app_v2/frontend/src/App.js"],"names":["React","Component","Button","axios","App","state","serverConnected","apiResponse","console","log","fetch","then","res","text","newState","JSON","parse","setState","catch","err","callAPI","valveName","setTimeout","timer","e","get","countdownHandler","logo","valve1","handleButtonClick","valve2"],"mappings":"yoCAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,C,6BAEA,MAAO,WAAP,CAEA,MAAOC,CAAAA,MAAP,KAAmB,kCAAnB,CAEA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,C,GAEMC,CAAAA,G,+SACFC,K,CAAQ,CACFC,eAAe,CAAE,KADf,CAEFC,WAAW,CAAE,oCAFX,C,wEAME,iBACRC,OAAO,CAACC,GAAR,CAAY,YAAZ,EACEC,KAAK,CAAC,2BAAD,CAAL,CACKC,IADL,CACU,SAAAC,GAAG,QAAIA,CAAAA,GAAG,CAACC,IAAJ,EAAJ,EADb,EAEKF,IAFL,CAEU,SAAAC,GAAG,CAAI,CACXJ,OAAO,CAACC,GAAR,CAAYK,QAAZ,EACA,GAAIA,CAAAA,QAAQ,CAAGC,IAAI,CAACC,KAAL,CAAWJ,GAAX,CAAf,CACA,MAAI,CAACK,QAAL,gCAAkBH,QAAlB,MAA4BP,WAAW,CAAE,kBAAzC,CAA6DD,eAAe,CAAE,IAA9E,IACD,CANL,EAOKY,KAPL,CAOW,SAAAC,GAAG,QAAIA,CAAAA,GAAJ,EAPd,EAQH,C,6DACmB,CAChB,KAAKC,OAAL,GACH,C,0DACgBC,S,CAAW,iBAC1BC,UAAU,CAAC,iBAAM,CAAA,MAAI,CAACL,QAAL,oBAAgBI,SAAhB,CAA2B,KAA3B,EAAN,EAAD,CAA2C,KAAKhB,KAAL,CAAWkB,KAAtD,CAAV,CACD,C,4DAEiBC,C,CAAGH,S,CAAW,iBAC9BlB,KAAK,CAACsB,GAAN,iCAAmCJ,SAAnC,GACCV,IADD,CACM,KAAKM,QAAL,oBAAgBI,SAAhB,CAA4B,CAAC,KAAKhB,KAAL,CAAWgB,SAAX,CAA7B,EAAqD,iBAAMb,CAAAA,OAAO,CAACC,GAAR,CAAY,MAAI,CAACJ,KAAL,CAAWgB,SAAX,CAAZ,CAAN,EAArD,CADN,EAECV,IAFD,CAEM,KAAKe,gBAAL,CAAsBL,SAAtB,CAFN,EAGD,C,uCAGQ,iBACL,mBACI,2BAAK,SAAS,CAAC,KAAf,eACI,8BAAQ,SAAS,CAAC,YAAlB,eACA,2BAAK,GAAG,CAAEM,IAAV,CAAgB,SAAS,CAAC,UAA1B,CAAqC,GAAG,CAAC,MAAzC,EADA,cAEI,0BAAI,SAAS,CAAC,WAAd,kCAFJ,CADJ,cAMI,0BAAI,SAAS,CAAG,WAAhB,EAA6B,KAAKtB,KAAL,CAAWE,WAAxC,CANJ,cAQI,2BAAK,SAAS,CAAE,WAAhB,eACG,oBAAC,MAAD,EAAQ,IAAI,CAAE,SAAd,CAAyB,MAAM,CAAI,KAAKF,KAAL,CAAWuB,MAA9C,CAAsD,OAAO,CAAI,iBAAAJ,CAAC,QAAI,CAAA,MAAI,CAACK,iBAAL,CAAuBL,CAAvB,CAA0B,QAA1B,CAAJ,EAAlE,EADH,cAEG,oBAAC,MAAD,EAAQ,IAAI,CAAE,SAAd,CAAyB,MAAM,CAAI,KAAKnB,KAAL,CAAWyB,MAA9C,CAAsD,OAAO,CAAI,iBAAAN,CAAC,QAAI,CAAA,MAAI,CAACK,iBAAL,CAAuBL,CAAvB,CAA0B,QAA1B,CAAJ,EAAlE,EAFH,CARJ,cAaI,8BAAQ,SAAS,CAAC,QAAlB,oDAbJ,CADJ,CAiBH,C,iBAlDavB,S,EAqDlB,cAAeG,CAAAA,GAAf","sourcesContent":["import React, { Component } from \"react\";\nimport logo from \"./logo.svg\";\nimport \"./App.css\";\n\nimport Button from \"./components/UI/Button/button.js\";\n\nimport axios from 'axios';\n\nclass App extends Component {          \n    state = {\n          serverConnected: false,\n          apiResponse: \"Hi there, server not connected....\", \n          };\n    \n\n    callAPI() {\n      console.log(\"api called\")\n        fetch(\"http://localhost:9000/api\")            \n            .then(res => res.text())\n            .then(res => {\n              console.log(newState);\n              let newState = JSON.parse(res);\n              this.setState({...newState, apiResponse: \"Server Connected\", serverConnected: true})              \n            })\n            .catch(err => err);\n    }\n    componentDidMount() {\n        this.callAPI();\n    } \n    countdownHandler(valveName) {\n      setTimeout(() => this.setState({[valveName]:false}), this.state.timer)\n    }   \n\n    handleButtonClick(e, valveName) {    \n      axios.get(`http://localhost:9000/${valveName}`)\n      .then(this.setState({[valveName]: !this.state[valveName]}, () => console.log(this.state[valveName])))\n      .then(this.countdownHandler(valveName));\n    }\n  \n\n    render() {     \n        return (\n            <div className=\"App\">\n                <header className=\"App-header\">\n                <img src={logo} className=\"App-logo\" alt=\"logo\" />\n                    <h1 className=\"App-title\">Welcome to the Control System</h1>                        \n                </header>\n\n                <h2 className = \"App-intro\">{this.state.apiResponse}</h2>\n\n                <div className= \"btn-group\">                  \n                   <Button name={\"Valve 1\"} status = {this.state.valve1} clicked = {e => this.handleButtonClick(e, \"valve1\")}/>\n                   <Button name={\"Valve 2\"} status = {this.state.valve2} clicked = {e => this.handleButtonClick(e, \"valve2\")}/>\n                </div>\n              \n                <footer className=\"footer\">Created 2020, Patrik Mackerle, version 0.1 ALFA</footer>\n            </div>\n        );\n    }\n}\n\nexport default App;"]},"metadata":{},"sourceType":"module"}