(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{15:function(e,t,a){e.exports={switch:"switch_switch__3lc8O",switchInput:"switch_switchInput__25xe8",switchLabel:"switch_switchLabel__2ug9s",switchSlider:"switch_switchSlider__2th6B"}},16:function(e,t,a){e.exports={btn:"field_btn__9lO_l",label:"field_label__1s0Ke",wrapper:"field_wrapper__3EIya"}},20:function(e,t){e.exports={API_KEY:"67c8ba4614f68ee675214715a1771ebd",BASE_URL:"https://api.openweathermap.org/data/2.5/"}},33:function(e,t,a){e.exports=a.p+"static/media/gardenApp_logo2.dc4d2143.png"},34:function(e,t,a){e.exports={navbar:"navbar_navbar__2V3RT",active:"navbar_active__MKLoI"}},36:function(e,t,a){e.exports=a.p+"static/media/grass.8c0dd03c.mp4"},38:function(e,t,a){e.exports=a(67)},43:function(e,t,a){},44:function(e,t,a){},67:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(32),l=a.n(r),s=(a(43),a(7)),i=a(10),o=a(11),u=a(13),m=a(12),h=a(1),p=(a(44),a(33)),d=a.n(p),v=a(34),f=a.n(v),b=function(e){return c.a.createElement("div",{className:f.a.navbar},c.a.createElement("img",{src:d.a,alt:"logo"}),c.a.createElement(s.b,{to:"/"},"Irrigation Control"),c.a.createElement(s.b,{to:"/settings"},"Irrigation Settings"),c.a.createElement(s.b,{to:"/weather"},"Weather"),c.a.createElement(s.b,{to:"/about"},"About"))},E=a(36),g=a.n(E),w=function(){return c.a.createElement("div",null,c.a.createElement("video",{autoPlay:!0,loop:!0,muted:!0,style:{position:"absolute",opacity:.6,width:"100%",left:"50%",top:"50%",height:"100%",objectFit:"cover",transform:"translate( -50%, -50%)",zIndex:"-1"}},c.a.createElement("source",{src:g.a,type:"video/mp4"})))},y=a(20),_=a.n(y),k=a(8),I=a.n(k),O=function(e){return c.a.createElement("div",null,c.a.createElement("p",null,"It is ",e.temp," degrees"))},C={key:_.a.API_KEY,base:_.a.BASE_URL},j=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).response=null,n.state={temp:"N/A"},n}return Object(o.a)(a,[{key:"getWeather",value:function(){var e=this;I.a.get("".concat(C.base,"weather?lat=50.171000&lon=15.825160&APPID=").concat(C.key,"&units=metric")).then((function(t){console.log(t.data),e.response=t.data,console.log(e.response.main.temp),e.setState({temp:e.response.main.temp})})),console.log("should fetch weather")}},{key:"componentDidMount",value:function(){this.getWeather()}},{key:"render",value:function(){return c.a.createElement("div",null,c.a.createElement("h1",null,"Experimental weather component"),c.a.createElement(O,{temp:this.state.temp}))}}]),a}(n.Component),A=a(21),N=a(15),x=a.n(N),S=function(e){var t=e.name;return e.status?t+=" is ON":t+=" is OFF",c.a.createElement("div",{className:x.a.switch},c.a.createElement("p",null,t),c.a.createElement("input",{type:"checkbox",className:x.a.switchInput,name:e.name,id:e.name,onClick:function(t){return e.clicked(t)},status:e.status}),c.a.createElement("label",{className:x.a.switchLabel,htmlFor:e.name,style:e.status?{backgroundColor:"rgba(124, 252, 0,0.6)"}:null},c.a.createElement("span",{className:x.a.switchSlider,style:e.status?{left:"calc(100% - 2px)",transform:"translateX(-100%)"}:null})))},P=a(37),B=a(16),D=a.n(B),F=function(e){var t=e.timer/6e4,a=Object(n.useState)(""),r=Object(P.a)(a,2),l=r[0],s=r[1];return c.a.createElement("div",{className:D.a.wrapper},c.a.createElement("form",{onSubmit:function(e){e.preventDefault(),I.a.get("".concat("http://localhost:9000","/setTimer/").concat(l))}},c.a.createElement("label",{className:D.a.label,type:"label",htmlFor:"timerValue"},"Timer set to ",t," minutes",c.a.createElement("input",{type:"text",id:"timerValue",name:"timerValue",className:D.a.inputField,onChange:function(e){return s(6e4*e.target.value)},required:!0})),c.a.createElement("input",{type:"submit",value:"Set",className:D.a.submitButton})))},L=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={serverConnected:!1,apiResponse:"Error has occured, please refresh...",valves:{valve:{name:"N/A",status:!1}},cycling:!1},n.intervalID=null,n}return Object(o.a)(a,[{key:"callAPI",value:function(){var e=this;I.a.get("".concat("http://localhost:9000","/api")).then((function(t){var a=t.data;e.setState(Object(A.a)(Object(A.a)({},a),{},{apiResponse:"Server Connected",serverConnected:!0}))})).then(console.log(this.state)).catch((function(e){return console.log(e)}))}},{key:"componentDidMount",value:function(){this.callAPI(),this.intervalID=setInterval(this.callAPI.bind(this),1e3)}},{key:"componentWillUnmount",value:function(){clearInterval(this.intervalID)}},{key:"handleButtonClick",value:function(e,t){this.state.cycling&&!1===this.state.valves[t].status?I.a.get("".concat("http://localhost:9000","/cycle")).then(this.callAPI()):I.a.get("".concat("http://localhost:9000","/run/").concat(t)).then(this.callAPI())}},{key:"handleCycleClick",value:function(e){this.setState({cycling:!this.state.cycling})}},{key:"render",value:function(){var e=this,t=this.state.valves,a=Object.keys(t).map((function(t,a){return c.a.createElement(S,{key:a,name:"Valve "+(a+1),status:e.state.valves[t].status,clicked:function(a){return e.handleButtonClick(a,t)}})}));return c.a.createElement("div",{className:"switch-group"},c.a.createElement("h2",null,this.state.apiResponse),c.a.createElement(F,{timer:this.state.timer}),c.a.createElement(S,{name:"Cycling",status:this.state.cycling,clicked:function(t){return e.handleCycleClick(t)}}),a)}}]),a}(n.Component),R=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){return c.a.createElement("div",{className:"App"},c.a.createElement(b,null),c.a.createElement(w,null),c.a.createElement("div",{id:"wrapper"},c.a.createElement(h.a,{path:"/",exact:!0,component:L}),c.a.createElement(h.a,{path:"/weather",component:j}),c.a.createElement(h.a,{path:"/about",render:function(){return c.a.createElement("div",null,"There will be About Component - details and stuff....")}}),c.a.createElement(h.a,{path:"/settings",render:function(){return c.a.createElement("div",null,"Calendar, where user can schedule irrigation")}})),c.a.createElement("footer",{className:"footer"},"Created 2020, Patrik Mackerle, version 1"))}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var W=c.a.createElement(s.a,null,c.a.createElement(R,null));l.a.render(W,document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[38,1,2]]]);
//# sourceMappingURL=main.95bcd41b.chunk.js.map